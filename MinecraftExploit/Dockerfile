# Use Ubuntu as the base image
FROM ubuntu:20.04

# Set environment variables to avoid user input prompts during installation
ENV DEBIAN_FRONTEND=noninteractive

# Update the package lists and install necessary packages
RUN apt-get update && \
    apt-get install -y wget curl && \
    apt-get clean

# Install Java JDK 1.8 build 181 from the archive link
RUN mkdir -p /usr/lib/jvm && \
    wget -O jdk-8u181-linux-x64.tar.gz "https://archive.org/download/Java-Archive/Java%20SE%208%20%288u202%20and%20earlier%29/8u181/JDK/jdk-8u181-linux-x64.tar.gz" && \
    tar -xzf jdk-8u181-linux-x64.tar.gz -C /usr/lib/jvm && \
    rm jdk-8u181-linux-x64.tar.gz

# Set JAVA_HOME environment variable and update PATH
ENV JAVA_HOME /usr/lib/jvm/jdk1.8.0_181
ENV PATH $JAVA_HOME/bin:$PATH

# Install Python 3
RUN apt-get update && \
    apt-get install -y python3 python3-pip && \
    apt-get clean

# Verify installations
RUN java -version && \
    python3 --version

RUN mkdir -p /demo/

# Copy local 'mcserver' folder to the Docker container 
COPY mcserver /demo/mcserver

# Expose port 25565 for Minecraft server
EXPOSE 25565

# Accept the EULA automatically
RUN echo "eula=true" > eula.txt


# Set default directory
WORKDIR /demo/mcserver/

# Set default command
CMD ["bash"]


# docker build -t linux-java-python .
# docker run -it -p 25565:25565 --name mcserver linux-java-python
